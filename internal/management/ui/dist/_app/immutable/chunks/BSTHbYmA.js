import{q as b,J as H,K as W,L as D,y as Z,M as G,g as V,N as j,O as ee,P as Y,Q as F,R as O,S as ne,T as re,U as B,k as ae,V as z,W as fe,X as ie,e as se,Y as le,Z as y,_ as ue,$ as J,a0 as oe,a1 as te,m as ve,a2 as m,a3 as X,a4 as $,a5 as K,a6 as q,a7 as de,a8 as ce,a9 as pe,aa as he,ab as _e,ac as ge}from"./B28Y1LK0.js";function Ae(e,a){return a}function Ee(e,a,r){for(var t=[],g=a.length,u,l=a.length,p=0;p<g;p++){let E=a[p];K(E,()=>{if(u){if(u.pending.delete(E),u.done.add(E),u.pending.size===0){var o=e.outrogroups;L(y(u.done)),o.delete(u),o.size===0&&(e.outrogroups=null)}}else l-=1},!1)}if(l===0){var s=t.length===0&&r!==null;if(s){var v=r,f=v.parentNode;he(f),f.append(v),e.items.clear()}L(a,!s)}else u={pending:new Set(a),done:new Set},(e.outrogroups??=new Set).add(u)}function L(e,a=!0){for(var r=0;r<e.length;r++)_e(e[r],a)}var U;function Ce(e,a,r,t,g,u=null){var l=e,p=new Map,s=(a&X)!==0;if(s){var v=e;l=b?H(W(v)):v.appendChild(D())}b&&Z();var f=null,E=se(()=>{var i=r();return le(i)?i:i==null?[]:y(i)}),o,c=!0;function T(){n.fallback=f,me(n,o,l,a,t),f!==null&&(o.length===0?(f.f&m)===0?$(f):(f.f^=m,M(f,null,l)):K(f,()=>{f=null}))}var N=G(()=>{o=V(E);var i=o.length;let S=!1;if(b){var I=j(l)===ee;I!==(i===0)&&(l=Y(),H(l),F(!1),S=!0)}for(var _=new Set,A=ae,R=ie(),h=0;h<i;h+=1){b&&O.nodeType===ne&&O.data===re&&(l=O,S=!0,F(!1));var C=o[h],x=t(C,h),d=c?null:p.get(x);d?(d.v&&B(d.v,C),d.i&&B(d.i,h),R&&A.unskip_effect(d.e)):(d=we(p,c?l:U??=D(),C,x,h,g,a,r),c||(d.e.f|=m),p.set(x,d)),_.add(x)}if(i===0&&u&&!f&&(c?f=z(()=>u(l)):(f=z(()=>u(U??=D())),f.f|=m)),i>_.size&&fe(),b&&i>0&&H(Y()),!c)if(R){for(const[P,Q]of p)_.has(P)||A.skip_effect(Q.e);A.oncommit(T),A.ondiscard(()=>{})}else T();S&&F(!0),V(E)}),n={effect:N,items:p,outrogroups:null,fallback:f};c=!1,b&&(l=O)}function k(e){for(;e!==null&&(e.f&ce)===0;)e=e.next;return e}function me(e,a,r,t,g){var u=(t&pe)!==0,l=a.length,p=e.items,s=k(e.effect.first),v,f=null,E,o=[],c=[],T,N,n,i;if(u)for(i=0;i<l;i+=1)T=a[i],N=g(T,i),n=p.get(N).e,(n.f&m)===0&&(n.nodes?.a?.measure(),(E??=new Set).add(n));for(i=0;i<l;i+=1){if(T=a[i],N=g(T,i),n=p.get(N).e,e.outrogroups!==null)for(const d of e.outrogroups)d.pending.delete(n),d.done.delete(n);if((n.f&m)!==0)if(n.f^=m,n===s)M(n,null,r);else{var S=f?f.next:s;n===e.effect.last&&(e.effect.last=n.prev),n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),w(e,f,n),w(e,n,S),M(n,S,r),f=n,o=[],c=[],s=k(f.next);continue}if((n.f&q)!==0&&($(n),u&&(n.nodes?.a?.unfix(),(E??=new Set).delete(n))),n!==s){if(v!==void 0&&v.has(n)){if(o.length<c.length){var I=c[0],_;f=I.prev;var A=o[0],R=o[o.length-1];for(_=0;_<o.length;_+=1)M(o[_],I,r);for(_=0;_<c.length;_+=1)v.delete(c[_]);w(e,A.prev,R.next),w(e,f,A),w(e,R,I),s=I,f=R,i-=1,o=[],c=[]}else v.delete(n),M(n,s,r),w(e,n.prev,n.next),w(e,n,f===null?e.effect.first:f.next),w(e,f,n),f=n;continue}for(o=[],c=[];s!==null&&s!==n;)(v??=new Set).add(s),c.push(s),s=k(s.next);if(s===null)continue}(n.f&m)===0&&o.push(n),f=n,s=k(n.next)}if(e.outrogroups!==null){for(const d of e.outrogroups)d.pending.size===0&&(L(y(d.done)),e.outrogroups?.delete(d));e.outrogroups.size===0&&(e.outrogroups=null)}if(s!==null||v!==void 0){var h=[];if(v!==void 0)for(n of v)(n.f&q)===0&&h.push(n);for(;s!==null;)(s.f&q)===0&&s!==e.fallback&&h.push(s),s=k(s.next);var C=h.length;if(C>0){var x=(t&X)!==0&&l===0?r:null;if(u){for(i=0;i<C;i+=1)h[i].nodes?.a?.measure();for(i=0;i<C;i+=1)h[i].nodes?.a?.fix()}Ee(e,h,x)}}u&&de(()=>{if(E!==void 0)for(n of E)n.nodes?.a?.apply()})}function we(e,a,r,t,g,u,l,p){var s=(l&oe)!==0?(l&te)===0?ve(r,!1,!1):J(r):null,v=(l&ue)!==0?J(g):null;return{v:s,i:v,e:z(()=>(u(a,s??r,v??g,p),()=>{e.delete(t)}))}}function M(e,a,r){if(e.nodes)for(var t=e.nodes.start,g=e.nodes.end,u=a&&(a.f&m)===0?a.nodes.start:r;t!==null;){var l=ge(t);if(u.before(t),t===g)return;t=l}}function w(e,a,r){a===null?e.effect.first=r:a.next=r,r===null?e.effect.last=a:r.prev=a}async function Ne(e,a){const r=await fetch(e,a);if(!r.ok){const t=await r.text();throw new Error(t||`Request failed (${r.status})`)}return await r.json()}function Se(e){return e instanceof Error?e.message:typeof e=="string"?e:"Request failed"}export{Ce as e,Ne as f,Ae as i,Se as p};
