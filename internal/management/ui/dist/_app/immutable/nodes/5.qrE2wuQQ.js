import{a as c,f as d}from"../chunks/YeIyPrO1.js";import"../chunks/JjcR20PN.js";import{o as et}from"../chunks/7XJTIz-S.js";import{p as st,a as ot,s as o,c as r,g as a,r as t,b as f,m as S,f as it,t as k,u as P,d as T}from"../chunks/B28Y1LK0.js";import{s as p}from"../chunks/DrRmIrL_.js";import{i as M}from"../chunks/CSigMgDx.js";import{f as q,p as lt,e as N,i as $}from"../chunks/BSTHbYmA.js";import{i as vt}from"../chunks/B5oQgd4i.js";var nt=d('<p class="muted">Loading...</p>'),ct=d("<p><strong> </strong> </p>"),pt=d("<p><strong> </strong> </p>"),dt=d('<p class="muted">No logs available.</p>'),_t=d("<tr><td> </td><td> </td><td> </td><td> </td></tr>"),ht=d('<div class="logs-table-wrap"><table><thead><tr><th scope="col">Type</th><th scope="col">Created At</th><th scope="col">Summary</th><th scope="col">Error</th></tr></thead><tbody></tbody></table></div>'),mt=d('<section class="panel"><h3>Health</h3> <div class="kv-grid"></div> <h3>Metrics</h3> <div class="kv-grid"></div></section> <section class="panel"><h3>Recent Logs</h3> <!></section>',1),gt=d('<p class="error" aria-live="polite"> </p>'),ft=d('<section><header class="page-header"><p class="kicker">Observability</p> <h2>Analytics</h2> <p class="muted">System health and recent runtime events.</p></header> <!> <!></section>');function Rt(w,z){st(z,!1);let O=S(!0),x=S(""),A=S({}),R=S([]);async function B(){f(O,!0),f(x,"");try{const[e,l]=await Promise.all([q("/api/manage/analytics/health"),q("/api/manage/analytics/logs?limit=100")]);f(A,e),f(R,l.logs||[])}catch(e){f(x,lt(e))}finally{f(O,!1)}}et(async()=>{await B()}),vt();var j=ft(),C=o(r(j),2);{var F=e=>{var l=nt();c(e,l)},G=e=>{var l=mt(),u=it(l),E=o(r(u),2);N(E,5,()=>Object.entries(a(A).status||{}),$,(v,n)=>{var _=P(()=>T(a(n),2));let g=()=>a(_)[0],y=()=>a(_)[1];var s=ct(),i=r(s),h=r(i,!0);t(i);var b=o(i);t(s),k(m=>{p(h,g()),p(b,`: ${m??""}`)},[()=>String(y())]),c(v,s)}),t(E);var D=o(E,4);N(D,5,()=>Object.entries(a(A).metrics||{}),$,(v,n)=>{var _=P(()=>T(a(n),2));let g=()=>a(_)[0],y=()=>a(_)[1];var s=pt(),i=r(s),h=r(i,!0);t(i);var b=o(i);t(s),k(m=>{p(h,g()),p(b,`: ${m??""}`)},[()=>String(y())]),c(v,s)}),t(D),t(u);var H=o(u,2),Q=o(r(H),2);{var U=v=>{var n=dt();c(v,n)},V=v=>{var n=ht(),_=r(n),g=o(r(_));N(g,5,()=>a(R),$,(y,s)=>{var i=_t(),h=r(i),b=r(h,!0);t(h);var m=o(h),W=r(m,!0);t(m);var L=o(m),X=r(L,!0);t(L);var J=o(L),Y=r(J,!0);t(J),t(i),k((Z,tt,at,rt)=>{p(b,Z),p(W,tt),p(X,at),p(Y,rt)},[()=>String(a(s).type||""),()=>String(a(s).createdAt||""),()=>String(a(s).summary||""),()=>String(a(s).error||"")]),c(y,i)}),t(g),t(_),t(n),c(v,n)};M(Q,v=>{a(R).length===0?v(U):v(V,!1)})}t(H),c(e,l)};M(C,e=>{a(O)?e(F):e(G,!1)})}var I=o(C,2);{var K=e=>{var l=gt(),u=r(l,!0);t(l),k(()=>p(u,a(x))),c(e,l)};M(I,e=>{a(x)&&e(K)})}t(j),c(w,j),ot()}export{Rt as component};
