import{b as Ua,c as fe,a as B,f as ne,t as ue}from"../chunks/kLQhPWY6.js";import"../chunks/QlvJzinA.js";import{o as Ha}from"../chunks/BVUCAm00.js";import{h as T,D as te,y as va,w as Ae,a as He,N as pa,g as b,P as Ka,Q as ja,R as $e,S as Z,B as Q,ae as za,aH as Wa,ap as ea,G as W,K as we,aO as Ya,M as xa,a6 as Ja,aP as je,aF as ze,aQ as Ga,a9 as aa,aR as Xa,aS as Qa,aK as D,aT as x,H as ha,J as ga,aU as De,aV as Za,aE as $a,I as Te,aB as er,aW as ar,O as rr,aX as tr,x as nr,ax as ba,U as Oe,d as Ce,V as We,f as _a,s as ir,aY as ma,aZ as Ye,a_ as ya,a$ as sr,b0 as lr,W as or,b1 as fr,b2 as ur,b3 as cr,b4 as dr,b5 as vr,b6 as pr,b7 as hr,b8 as gr,b9 as br,aL as _r,p as wa,k as ce,m as Ea,t as ee,a0 as m,o as U,v as C,q,ba as mr,aq as ae}from"../chunks/C6zFzvT6.js";import{i as yr,a as wr,c as Er,d as ka,n as kr,b as Sr,e as I,s as de}from"../chunks/CMFuQ5zr.js";import{B as Ar,l as ra,p as ke,i as be,b as ta}from"../chunks/CH0Xl93i.js";import{i as Sa}from"../chunks/BTWVb9K7.js";import{d as Tr,r as me}from"../chunks/3QrOtgpq.js";import{s as na}from"../chunks/D8ZaTgkn.js";function Nr(e,a){return a}function Pr(e,a,r){for(var t=[],n=a.length,s,f=a.length,i=0;i<n;i++){let g=a[i];ga(g,()=>{if(s){if(s.pending.delete(g),s.done.add(g),s.pending.size===0){var h=e.outrogroups;Ke(ze(s.done)),h.delete(s),h.size===0&&(e.outrogroups=null)}}else f-=1},!1)}if(f===0){var c=t.length===0&&r!==null;if(c){var o=r,v=o.parentNode;$a(v),v.append(o),e.items.clear()}Ke(a,!c)}else s={pending:new Set(a),done:new Set},(e.outrogroups??=new Set).add(s)}function Ke(e,a=!0){for(var r=0;r<e.length;r++)Te(e[r],a)}var ia;function Or(e,a,r,t,n,s=null){var f=e,i=new Map;{var c=e;f=T?te(va(c)):c.appendChild(Ae())}T&&He();var o=null,v=Ja(()=>{var p=r();return je(p)?p:p==null?[]:ze(p)}),g,h=!0;function E(){k.fallback=o,Cr(k,g,f,a,t),o!==null&&(g.length===0?(o.f&x)===0?ha(o):(o.f^=x,_e(o,null,f)):ga(o,()=>{o=null}))}var u=pa(()=>{g=b(v);var p=g.length;let y=!1;if(T){var A=Ka(f)===ja;A!==(p===0)&&(f=$e(),te(f),Z(!1),y=!0)}for(var P=new Set,l=W,V=xa(),_=0;_<p;_+=1){T&&Q.nodeType===za&&Q.data===Wa&&(f=Q,y=!0,Z(!1));var w=g[_],S=t(w,_),F=h?null:i.get(S);F?(F.v&&ea(F.v,w),F.i&&ea(F.i,_),V&&l.unskip_effect(F.e)):(F=Mr(i,h?f:ia??=Ae(),w,S,_,n,a,r),h||(F.e.f|=x),i.set(S,F)),P.add(S)}if(p===0&&s&&!o&&(h?o=we(()=>s(f)):(o=we(()=>s(ia??=Ae())),o.f|=x)),p>P.size&&Ya(),T&&p>0&&te($e()),!h)if(V){for(const[M,ie]of i)P.has(M)||l.skip_effect(ie.e);l.oncommit(E),l.ondiscard(()=>{})}else E();y&&Z(!0),b(v)}),k={effect:u,items:i,outrogroups:null,fallback:o};h=!1,T&&(f=Q)}function ve(e){for(;e!==null&&(e.f&Za)===0;)e=e.next;return e}function Cr(e,a,r,t,n){var s=a.length,f=e.items,i=ve(e.effect.first),c,o=null,v=[],g=[],h,E,u,k;for(k=0;k<s;k+=1){if(h=a[k],E=n(h,k),u=f.get(E).e,e.outrogroups!==null)for(const S of e.outrogroups)S.pending.delete(u),S.done.delete(u);if((u.f&x)!==0)if(u.f^=x,u===i)_e(u,null,r);else{var p=o?o.next:i;u===e.effect.last&&(e.effect.last=u.prev),u.prev&&(u.prev.next=u.next),u.next&&(u.next.prev=u.prev),Y(e,o,u),Y(e,u,p),_e(u,p,r),o=u,v=[],g=[],i=ve(o.next);continue}if((u.f&De)!==0&&ha(u),u!==i){if(c!==void 0&&c.has(u)){if(v.length<g.length){var y=g[0],A;o=y.prev;var P=v[0],l=v[v.length-1];for(A=0;A<v.length;A+=1)_e(v[A],y,r);for(A=0;A<g.length;A+=1)c.delete(g[A]);Y(e,P.prev,l.next),Y(e,o,P),Y(e,l,y),i=y,o=l,k-=1,v=[],g=[]}else c.delete(u),_e(u,i,r),Y(e,u.prev,u.next),Y(e,u,o===null?e.effect.first:o.next),Y(e,o,u),o=u;continue}for(v=[],g=[];i!==null&&i!==u;)(c??=new Set).add(i),g.push(i),i=ve(i.next);if(i===null)continue}(u.f&x)===0&&v.push(u),o=u,i=ve(u.next)}if(e.outrogroups!==null){for(const S of e.outrogroups)S.pending.size===0&&(Ke(ze(S.done)),e.outrogroups?.delete(S));e.outrogroups.size===0&&(e.outrogroups=null)}if(i!==null||c!==void 0){var V=[];if(c!==void 0)for(u of c)(u.f&De)===0&&V.push(u);for(;i!==null;)(i.f&De)===0&&i!==e.fallback&&V.push(i),i=ve(i.next);var _=V.length;if(_>0){var w=s===0?r:null;Pr(e,V,w)}}}function Mr(e,a,r,t,n,s,f,i){var c=(f&Xa)!==0?(f&Qa)===0?D(r,!1,!1):aa(r):null,o=(f&Ga)!==0?aa(n):null;return{v:c,i:o,e:we(()=>(s(a,c??r,o??n,i),()=>{e.delete(t)}))}}function _e(e,a,r){if(e.nodes)for(var t=e.nodes.start,n=e.nodes.end,s=a&&(a.f&x)===0?a.nodes.start:r;t!==null;){var f=er(t);if(s.before(t),t===n)return;t=f}}function Y(e,a,r){a===null?e.effect.first=r:a.next=r,r===null?e.effect.last=a:r.prev=a}function sa(e,a,r,t,n,s){let f=T;T&&He();var i=null;T&&Q.nodeType===ar&&(i=Q,He());var c=T?Q:e,o=new Ar(c,!1);pa(()=>{const v=a()||null;var g=v==="svg"?tr:null;if(v===null){o.ensure(null,null);return}return o.ensure(v,h=>{if(v){if(i=T?i:g?document.createElementNS(g,v):document.createElement(v),Ua(i,i),t){T&&yr(v)&&i.append(document.createComment(""));var E=T?va(i):i.appendChild(Ae());T&&(E===null?Z(!1):te(E)),t(i,E)}nr.nodes.end=i,h.before(i)}T&&te(h)}),()=>{}},rr),ba(()=>{}),f&&(Z(!0),te(c))}function Lr(e,a,r){Oe(()=>{var t=Ce(()=>a(e,r?.())||{});if(r&&t?.update){var n=!1,s={};We(()=>{var f=r();_a(f),n&&ir(s,f)&&(s=f,t.update(f))}),n=!0}if(t?.destroy)return()=>t.destroy()})}function Ir(e,a){var r=void 0,t;ma(()=>{r!==(r=a())&&(t&&(Te(t),t=null),r&&(t=we(()=>{Oe(()=>r(e))})))})}function Aa(e){var a,r,t="";if(typeof e=="string"||typeof e=="number")t+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(a=0;a<n;a++)e[a]&&(r=Aa(e[a]))&&(t&&(t+=" "),t+=r)}else for(r in e)e[r]&&(t&&(t+=" "),t+=r);return t}function Rr(){for(var e,a,r=0,t="",n=arguments.length;r<n;r++)(e=arguments[r])&&(a=Aa(e))&&(t&&(t+=" "),t+=a);return t}function Fr(e){return typeof e=="object"?Rr(e):e??""}const la=[...` 	
\r\fÂ \v\uFEFF`];function Dr(e,a,r){var t=e==null?"":""+e;if(r){for(var n in r)if(r[n])t=t?t+" "+n:n;else if(t.length)for(var s=n.length,f=0;(f=t.indexOf(n,f))>=0;){var i=f+s;(f===0||la.includes(t[f-1]))&&(i===t.length||la.includes(t[i]))?t=(f===0?"":t.substring(0,f))+t.substring(i+1):f=i}}return t===""?null:t}function oa(e,a=!1){var r=a?" !important;":";",t="";for(var n in e){var s=e[n];s!=null&&s!==""&&(t+=" "+n+": "+s+r)}return t}function Be(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Br(e,a){if(a){var r="",t,n;if(Array.isArray(a)?(t=a[0],n=a[1]):t=a,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,f=0,i=!1,c=[];t&&c.push(...Object.keys(t).map(Be)),n&&c.push(...Object.keys(n).map(Be));var o=0,v=-1;const k=e.length;for(var g=0;g<k;g++){var h=e[g];if(i?h==="/"&&e[g-1]==="*"&&(i=!1):s?s===h&&(s=!1):h==="/"&&e[g+1]==="*"?i=!0:h==='"'||h==="'"?s=h:h==="("?f++:h===")"&&f--,!i&&s===!1&&f===0){if(h===":"&&v===-1)v=g;else if(h===";"||g===k-1){if(v!==-1){var E=Be(e.substring(o,v).trim());if(!c.includes(E)){h!==";"&&g++;var u=e.substring(o,g).trim();r+=" "+u+";"}}o=g+1,v=-1}}}}return t&&(r+=oa(t)),n&&(r+=oa(n,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function Vr(e,a,r,t,n,s){var f=e.__className;if(T||f!==r||f===void 0){var i=Dr(r,t,s);(!T||i!==e.getAttribute("class"))&&(i==null?e.removeAttribute("class"):a?e.className=i:e.setAttribute("class",i)),e.__className=r}else if(s&&n!==s)for(var c in s){var o=!!s[c];(n==null||o!==!!n[c])&&e.classList.toggle(c,o)}return s}function Ve(e,a={},r,t){for(var n in r){var s=r[n];a[n]!==s&&(r[n]==null?e.style.removeProperty(n):e.style.setProperty(n,s,t))}}function qr(e,a,r,t){var n=e.__style;if(T||n!==a){var s=Br(a,t);(!T||s!==e.getAttribute("style"))&&(s==null?e.removeAttribute("style"):e.style.cssText=s),e.__style=a}else t&&(Array.isArray(t)?(Ve(e,r?.[0],t[0]),Ve(e,r?.[1],t[1],"important")):Ve(e,r,t));return t}function Ne(e,a,r=!1){if(e.multiple){if(a==null)return;if(!je(a))return sr();for(var t of e.options)t.selected=a.includes(ye(t));return}for(t of e.options){var n=ye(t);if(lr(n,a)){t.selected=!0;return}}(!r||a!==void 0)&&(e.selectedIndex=-1)}function Ta(e){var a=new MutationObserver(()=>{Ne(e,e.__value)});a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),ba(()=>{a.disconnect()})}function Ur(e,a,r=a){var t=new WeakSet,n=!0;Ye(e,"change",s=>{var f=s?"[selected]":":checked",i;if(e.multiple)i=[].map.call(e.querySelectorAll(f),ye);else{var c=e.querySelector(f)??e.querySelector("option:not([disabled])");i=c&&ye(c)}r(i),W!==null&&t.add(W)}),Oe(()=>{var s=a();if(e===document.activeElement){var f=ya??W;if(t.has(f))return}if(Ne(e,s,n),n&&s===void 0){var i=e.querySelector(":checked");i!==null&&(s=ye(i),r(s))}e.__value=s,n=!1}),Ta(e)}function ye(e){return"__value"in e?e.__value:e.value}const pe=Symbol("class"),he=Symbol("style"),Na=Symbol("is custom element"),Pa=Symbol("is html");function z(e){if(T){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var t=e.value;Pe(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var n=e.checked;Pe(e,"checked",null),e.checked=n}}};e.__on_r=r,or(r),fr()}}function Hr(e,a){a?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Pe(e,a,r,t){var n=Oa(e);T&&(n[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||n[a]!==(n[a]=r)&&(a==="loading"&&(e[ur]=r),r==null?e.removeAttribute(a):typeof r!="string"&&Ca(e).includes(a)?e[a]=r:e.setAttribute(a,r))}function Kr(e,a,r,t,n=!1,s=!1){if(T&&n&&e.tagName==="INPUT"){var f=e,i=f.type==="checkbox"?"defaultChecked":"defaultValue";i in r||z(f)}var c=Oa(e),o=c[Na],v=!c[Pa];let g=T&&o;g&&Z(!1);var h=a||{},E=e.tagName==="OPTION";for(var u in a)u in r||(r[u]=null);r.class?r.class=Fr(r.class):r[pe]&&(r.class=null),r[he]&&(r.style??=null);var k=Ca(e);for(const _ in r){let w=r[_];if(E&&_==="value"&&w==null){e.value=e.__value="",h[_]=w;continue}if(_==="class"){var p=e.namespaceURI==="http://www.w3.org/1999/xhtml";Vr(e,p,w,t,a?.[pe],r[pe]),h[_]=w,h[pe]=r[pe];continue}if(_==="style"){qr(e,w,a?.[he],r[he]),h[_]=w,h[he]=r[he];continue}var y=h[_];if(!(w===y&&!(w===void 0&&e.hasAttribute(_)))){h[_]=w;var A=_[0]+_[1];if(A!=="$$")if(A==="on"){const S={},F="$$"+_;let M=_.slice(2);var P=Sr(M);if(wr(M)&&(M=M.slice(0,-7),S.capture=!0),!P&&y){if(w!=null)continue;e.removeEventListener(M,h[F],S),h[F]=null}if(w!=null)if(P)e[`__${M}`]=w,ka([M]);else{let ie=function(se){h[_].call(this,se)};h[F]=Er(M,e,ie,S)}else P&&(e[`__${M}`]=void 0)}else if(_==="style")Pe(e,_,w);else if(_==="autofocus")pr(e,!!w);else if(!o&&(_==="__value"||_==="value"&&w!=null))e.value=e.__value=w;else if(_==="selected"&&E)Hr(e,w);else{var l=_;v||(l=kr(l));var V=l==="defaultValue"||l==="defaultChecked";if(w==null&&!o&&!V)if(c[_]=null,l==="value"||l==="checked"){let S=e;const F=a===void 0;if(l==="value"){let M=S.defaultValue;S.removeAttribute(l),S.defaultValue=M,S.value=S.__value=F?M:null}else{let M=S.defaultChecked;S.removeAttribute(l),S.defaultChecked=M,S.checked=F?M:!1}}else e.removeAttribute(_);else V||k.includes(l)&&(o||typeof w!="string")?(e[l]=w,l in c&&(c[l]=hr)):typeof w!="function"&&Pe(e,l,w)}}}return g&&Z(!0),h}function fa(e,a,r=[],t=[],n=[],s,f=!1,i=!1){dr(n,r,t,c=>{var o=void 0,v={},g=e.nodeName==="SELECT",h=!1;if(ma(()=>{var u=a(...c.map(b)),k=Kr(e,o,u,s,f,i);h&&g&&"value"in u&&Ne(e,u.value);for(let y of Object.getOwnPropertySymbols(v))u[y]||Te(v[y]);for(let y of Object.getOwnPropertySymbols(u)){var p=u[y];y.description===vr&&(!o||p!==o[y])&&(v[y]&&Te(v[y]),v[y]=we(()=>Ir(e,()=>p))),k[y]=p}o=k}),g){var E=e;Oe(()=>{Ne(E,o.value,!0),Ta(E)})}h=!0})}function Oa(e){return e.__attributes??={[Na]:e.nodeName.includes("-"),[Pa]:e.namespaceURI===cr}}var ua=new Map;function Ca(e){var a=e.getAttribute("is")||e.nodeName,r=ua.get(a);if(r)return r;ua.set(a,r=[]);for(var t,n=e,s=Element.prototype;s!==n;){t=br(n);for(var f in t)t[f].set&&r.push(f);n=gr(n)}return r}function X(e,a,r=a){var t=new WeakSet;Ye(e,"input",async n=>{var s=n?e.defaultValue:e.value;if(s=qe(e)?Ue(s):s,r(s),W!==null&&t.add(W),await _r(),s!==(s=a())){var f=e.selectionStart,i=e.selectionEnd,c=e.value.length;if(e.value=s??"",i!==null){var o=e.value.length;f===i&&i===c&&o>c?(e.selectionStart=o,e.selectionEnd=o):(e.selectionStart=f,e.selectionEnd=Math.min(i,o))}}}),(T&&e.defaultValue!==e.value||Ce(a)==null&&e.value)&&(r(qe(e)?Ue(e.value):e.value),W!==null&&t.add(W)),We(()=>{var n=a();if(e===document.activeElement){var s=ya??W;if(t.has(s))return}qe(e)&&n===Ue(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function jr(e,a,r=a){Ye(e,"change",t=>{var n=t?e.defaultChecked:e.checked;r(n)}),(T&&e.defaultChecked!==e.checked||Ce(a)==null)&&r(e.checked),We(()=>{var t=a();e.checked=!!t})}function qe(e){var a=e.type;return a==="number"||a==="range"}function Ue(e){return e===""?null:+e}function R(e,a){var r=e.$$events?.[a.type],t=je(r)?r.slice():r==null?[]:[r];for(var n of t)n.call(this,a)}const zr=!0,vt=Object.freeze(Object.defineProperty({__proto__:null,prerender:zr},Symbol.toStringTag,{value:"Module"}));function Wr(e){return Object.keys(e).reduce((a,r)=>e[r]===void 0?a:a+`${r}:${e[r]};`,"")}Wr({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function ca(e){function a(r){return r(e),()=>{}}return{subscribe:a}}const Se=e=>new Proxy(e,{get(a,r,t){return Reflect.get(a,r,t)},ownKeys(a){return Reflect.ownKeys(a).filter(r=>r!=="action")}}),da=e=>typeof e=="function";Yr("empty");function Yr(e,a){const{stores:r,action:t,returned:n}={},s=(()=>{if(r&&n)return Tr(r,i=>{const c=n(i);if(da(c)){const o=(...v)=>Se({...c(...v),[`data-melt-${e}`]:"",action:t??re});return o.action=t??re,o}return Se({...c,[`data-melt-${e}`]:"",action:t??re})});{const c=n?.();if(da(c)){const o=(...v)=>Se({...c(...v),[`data-melt-${e}`]:"",action:t??re});return o.action=t??re,ca(o)}return ca(Se({...c,[`data-melt-${e}`]:"",action:t??re}))}})(),f=t??(()=>{});return f.subscribe=s.subscribe,f}function re(){}function Ma(e,a,r,t){const n=Array.isArray(a)?a:[a];return n.forEach(s=>e.addEventListener(s,r,t)),()=>{n.forEach(s=>e.removeEventListener(s,r,t))}}function xr(e,...a){const r={};for(const t of Object.keys(e))a.includes(t)||(r[t]=e[t]);return r}const Jr={ESCAPE:"Escape"};me(void 0,e=>{function a(t){e(t),e(void 0)}return Ma(document,"pointerup",a,{passive:!1,capture:!0})});me(void 0,e=>{function a(t){t&&t.key===Jr.ESCAPE&&e(t),e(void 0)}return Ma(document,"keydown",a,{passive:!1})});me(!1),me(!1),me(void 0);const Gr={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...xr(Gr,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});function Xr(e,a){const r=[];return a.builders.forEach(t=>{const n=t.action(e);n&&r.push(n)}),{destroy:()=>{r.forEach(t=>{t.destroy&&t.destroy()})}}}function Qr(e){const a={};return e.forEach(r=>{Object.keys(r).forEach(t=>{t!=="action"&&(a[t]=r[t])})}),a}function ge(e,a){const r=ra(a,["children","$$slots","$$events","$$legacy"]),t=ra(r,["href","type","builders","el"]);wa(a,!1);let n=ke(a,"href",24,()=>{}),s=ke(a,"type",24,()=>{}),f=ke(a,"builders",24,()=>[]),i=ke(a,"el",28,()=>{});const c={"data-button-root":""};Sa();var o=fe(),v=ce(o);{var g=E=>{var u=fe(),k=ce(u);sa(k,()=>n()?"a":"button",!1,(p,y)=>{ta(p,l=>i(l),()=>i()),Lr(p,(l,V)=>Xr?.(l,V),()=>({builders:f()})),fa(p,l=>({type:n()?void 0:s(),href:n(),tabindex:"0",...l,...t,...c}),[()=>Qr(f())]),I("click",p,function(l){R.call(this,a,l)}),I("change",p,function(l){R.call(this,a,l)}),I("keydown",p,function(l){R.call(this,a,l)}),I("keyup",p,function(l){R.call(this,a,l)}),I("mouseenter",p,function(l){R.call(this,a,l)}),I("mouseleave",p,function(l){R.call(this,a,l)}),I("mousedown",p,function(l){R.call(this,a,l)}),I("pointerdown",p,function(l){R.call(this,a,l)}),I("mouseup",p,function(l){R.call(this,a,l)}),I("pointerup",p,function(l){R.call(this,a,l)});var A=fe(),P=ce(A);na(P,a,"default",{}),B(y,A)}),B(E,u)},h=E=>{var u=fe(),k=ce(u);sa(k,()=>n()?"a":"button",!1,(p,y)=>{ta(p,l=>i(l),()=>i()),fa(p,()=>({type:n()?void 0:s(),href:n(),tabindex:"0",...t,...c})),I("click",p,function(l){R.call(this,a,l)}),I("change",p,function(l){R.call(this,a,l)}),I("keydown",p,function(l){R.call(this,a,l)}),I("keyup",p,function(l){R.call(this,a,l)}),I("mouseenter",p,function(l){R.call(this,a,l)}),I("mouseleave",p,function(l){R.call(this,a,l)}),I("mousedown",p,function(l){R.call(this,a,l)}),I("pointerdown",p,function(l){R.call(this,a,l)}),I("mouseup",p,function(l){R.call(this,a,l)}),I("pointerup",p,function(l){R.call(this,a,l)});var A=fe(),P=ce(A);na(P,a,"default",{}),B(y,A)}),B(E,u)};be(v,E=>{_a(f()),Ce(()=>f()&&f().length)?E(g):E(h,!1)})}B(e,o),Ea()}var Zr=ne("<option> </option>"),$r=ne('<section class="panel"><h2>Initial setup</h2> <p class="muted">Provider tests run only when you click Test connection. Remote providers may incur small usage cost.</p> <label for="provider">Provider</label> <select id="provider"></select> <label for="api-key">API key</label> <input id="api-key" type="password" autocomplete="off"/> <label for="api-base">API base</label> <input id="api-base" type="text" autocomplete="off"/> <label for="model">Model</label> <input id="model" type="text" autocomplete="off"/> <div class="inline"><!> <span class="result"> </span></div> <hr/> <label class="checkbox" for="telegram-enabled"><input id="telegram-enabled" type="checkbox"/> Enable Telegram channel</label> <label for="telegram-token">Telegram token</label> <input id="telegram-token" type="password" autocomplete="off"/> <label for="telegram-allow">Telegram allow list (comma-separated)</label> <input id="telegram-allow" type="text" autocomplete="off"/> <hr/> <label for="password">Management password (min 12 chars)</label> <input id="password" type="password" autocomplete="new-password"/> <!></section>'),et=ne('<section class="panel"><h2>Management login</h2> <label for="login-password">Password</label> <input id="login-password" type="password" autocomplete="current-password"/> <!></section>'),at=ne('<section class="panel"><h2>Management interface</h2> <p class="muted"> </p> <div class="inline"><!> <!></div></section>'),rt=ne('<p class="error"> </p>'),tt=ne('<main><header><p class="kicker">Squidbot Control Plane</p> <h1>Onboarding and Management</h1> <p class="muted"> </p></header> <!> <!> <!> <!></main>');function pt(e,a){wa(a,!1);let r=D("loading"),t=D("Loading setup state..."),n=D(""),s="",f=D([]),i=D(""),c=D(""),o=D(""),v=D(""),g=D(!1),h=D(""),E=D(""),u=D(""),k=D(""),p=D(""),y=D("Loading management state...");const A=()=>{m(n,"")},P=d=>{if(typeof d=="string"){m(n,d);return}m(n,"Request failed")};async function l(d,N){const L=await fetch(d,N);if(!L.ok){const K=await L.text();throw new Error(K||`Request failed (${L.status})`)}return await L.json()}function V(){const d=b(f).find(N=>N.id===b(i));d&&(!b(o)&&d.defaultApiBase&&m(o,d.defaultApiBase),!b(v)&&d.defaultModel&&m(v,d.defaultModel))}async function _(){A(),m(r,"loading");const d=await l("/api/setup/state");if(m(f,d.providers||[]),m(i,d.current?.provider?.id||b(f)[0]?.id||""),m(o,d.current?.provider?.apiBase||""),m(v,d.current?.provider?.model||""),m(g,!!d.current?.channels?.telegram?.enabled),m(E,(d.current?.channels?.telegram?.allowFrom||[]).join(",")),V(),!d.setupComplete){m(r,"onboarding"),m(t,"Complete first-time onboarding to enable management login.");return}if((await l("/api/auth/session")).authenticated){m(r,"manage"),m(t,"Authenticated management session."),await M();return}m(r,"login"),m(t,"Setup is complete. Sign in to access management.")}async function w(){A(),m(k,"Testing...");try{const d=await l("/api/setup/provider/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({setupToken:s,provider:b(i),apiKey:b(c),apiBase:b(o),model:b(v)})});if(d.ok){m(k,"Connection OK");return}m(k,"Failed"),P(d.error||"Provider test failed")}catch(d){m(k,"Failed"),P(d.message)}}async function S(){A();try{await l("/api/setup/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({setupToken:s,provider:b(i),apiKey:b(c),apiBase:b(o),model:b(v),channel:{id:"telegram",enabled:b(g),token:b(h),allowFrom:b(E).split(",").map(N=>N.trim()).filter(N=>N.length>0)},password:b(u)})});const d=new URL(window.location.href);d.searchParams.delete("setup_token"),window.history.replaceState({},"",d.toString()),s="",m(u,""),await _()}catch(d){P(d.message)}}async function F(){A();try{await l("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:b(p)})}),m(p,""),await _()}catch(d){P(d.message)}}async function M(){A();try{const d=await l("/api/manage/placeholder");m(y,d.message||"Management ready.")}catch(d){m(y,""),P(d.message)}}async function ie(){A();try{await l("/api/auth/logout",{method:"POST"}),await _()}catch(d){P(d.message)}}Ha(async()=>{s=new URLSearchParams(window.location.search).get("setup_token")||"";try{await _()}catch(d){P(d.message),m(r,"loading")}}),Sa();var se=tt(),Me=U(se),xe=C(U(Me),4),La=U(xe,!0);q(xe),q(Me);var Je=C(Me,2);{var Ia=d=>{var N=$r(),L=C(U(N),6);ee(()=>{b(i),mr(()=>{b(f)})}),L.__change=V,Or(L,5,()=>b(f),Nr,(O,oe)=>{var j=Zr(),qa=U(j,!0);q(j);var Ze={};ee(()=>{de(qa,b(oe).label),Ze!==(Ze=b(oe).id)&&(j.value=(j.__value=b(oe).id)??"")}),B(O,j)}),q(L);var K=C(L,4);z(K);var H=C(K,4);z(H);var J=C(H,4);z(J);var G=C(J,2),$=U(G);ge($,{type:"button",onclick:w,children:(O,oe)=>{ae();var j=ue("Test connection");B(O,j)},$$slots:{default:!0}});var Ee=C($,2),le=U(Ee,!0);q(Ee),q(G);var Le=C(G,4),Qe=U(Le);z(Qe),ae(),q(Le);var Ie=C(Le,4);z(Ie);var Re=C(Ie,4);z(Re);var Fe=C(Re,6);z(Fe);var Va=C(Fe,2);ge(Va,{type:"button",onclick:S,children:(O,oe)=>{ae();var j=ue("Complete setup");B(O,j)},$$slots:{default:!0}}),q(N),ee(()=>de(le,b(k))),Ur(L,()=>b(i),O=>m(i,O)),X(K,()=>b(c),O=>m(c,O)),X(H,()=>b(o),O=>m(o,O)),X(J,()=>b(v),O=>m(v,O)),jr(Qe,()=>b(g),O=>m(g,O)),X(Ie,()=>b(h),O=>m(h,O)),X(Re,()=>b(E),O=>m(E,O)),X(Fe,()=>b(u),O=>m(u,O)),B(d,N)};be(Je,d=>{b(r)==="onboarding"&&d(Ia)})}var Ge=C(Je,2);{var Ra=d=>{var N=et(),L=C(U(N),4);z(L);var K=C(L,2);ge(K,{type:"button",onclick:F,children:(H,J)=>{ae();var G=ue("Sign in");B(H,G)},$$slots:{default:!0}}),q(N),X(L,()=>b(p),H=>m(p,H)),B(d,N)};be(Ge,d=>{b(r)==="login"&&d(Ra)})}var Xe=C(Ge,2);{var Fa=d=>{var N=at(),L=C(U(N),2),K=U(L,!0);q(L);var H=C(L,2),J=U(H);ge(J,{type:"button",onclick:M,children:($,Ee)=>{ae();var le=ue("Refresh");B($,le)},$$slots:{default:!0}});var G=C(J,2);ge(G,{type:"button",onclick:ie,children:($,Ee)=>{ae();var le=ue("Logout");B($,le)},$$slots:{default:!0}}),q(H),q(N),ee(()=>de(K,b(y))),B(d,N)};be(Xe,d=>{b(r)==="manage"&&d(Fa)})}var Da=C(Xe,2);{var Ba=d=>{var N=rt(),L=U(N,!0);q(N),ee(()=>de(L,b(n))),B(d,N)};be(Da,d=>{b(n)&&d(Ba)})}q(se),ee(()=>de(La,b(t))),B(e,se),Ea()}ka(["change"]);export{pt as component,vt as universal};
